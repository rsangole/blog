{
  "hash": "7192981e02ecd1dc24bfe62aaa5c5678",
  "result": {
    "markdown": "---\ntitle: TidyTuesday - The Tate Collection\ndate: '2021-01-19'\ncategories:\n  - TidyTuesday\n  - Visualization\nimage: graph.png\n---\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<blockquote class=\"twitter-tweet\" data-width=\"550\" data-lang=\"en\" data-dnt=\"true\" data-theme=\"light\"><p lang=\"en\" dir=\"ltr\">Last week&#39;s <a href=\"https://twitter.com/hashtag/TidyTuesday?src=hash&amp;ref_src=twsrc%5Etfw\">#TidyTuesday</a>. Had something very specific in mind &amp; it forced me to learn a new pkg and some base R to finish this plot.<br><br>I wanted to showcase the change in the dominant medium from Graphite to Screenprint, which we can see in this beeswarm plot.<a href=\"https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw\">#rstats</a> <a href=\"https://t.co/6uMCLHag4P\">pic.twitter.com/6uMCLHag4P</a></p>&mdash; Rahul (@rsangole) <a href=\"https://twitter.com/rsangole/status/1351780885784195076?ref_src=twsrc%5Etfw\">January 20, 2021</a></blockquote>\n\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidyr)\nlibrary(data.table)\nlibrary(beeswarm)\nlibrary(extrafont)\n# extrafont::font_import(paths = \".\", prompt = F)\n\nartists <- data.table::fread(\"artists.csv\") %>% \n  mutate(gender = ifelse(is.na(gender), \"Unknown\", gender),\n         gender = factor(gender,levels = c(\"Male\",\"Female\", \"Unknown\"), ordered = TRUE),\n         life_yr = yearOfDeath - yearOfBirth,\n         pre_1850 = yearOfBirth < 1850,\n         name_len = stringr::str_length(name) - 2) %>% \n  separate(col = \"placeOfBirth\", sep = \",\", into = c(\"birth_city\", \"birth_country\"), remove = F) %>% \n  separate(col = \"placeOfDeath\", sep = \",\", into = c(\"death_city\", \"death_country\"), remove = F) %>% \n  mutate(moved_countries = birth_country != death_country,\n         birth_country = ifelse(is.na(birth_country), \"Unknown\", birth_country),\n         death_country = ifelse(is.na(death_country), \"Unknown\", death_country))\nartwork <-\n    data.table::fread(\"artwork.csv\") %>%\n    mutate(\n        artistRole = as.factor(artistRole),\n        medium = as.factor(medium),\n        units = as.factor(units),\n        area = width * height,\n        title_len = stringr::str_length(title)\n    ) %>%\n    left_join(\n        y = artists %>% select(name, gender, yearOfBirth, birth_city, birth_country, life_yr),\n        by = c(\"artist\" = \"name\")\n    )\n\n\ncolor_pallete <- c(\"#005780\",\n                   \"#3e487a\",\n                   \"#955196\",\n                   \"#dd5182\",\n                   \"#ff6e54\",\n                   \"#ffa600\")\n\nartwork[,\n        medium_cleaned := case_when(\n            grepl(pattern = \"Graphite\", x = medium) ~ \"Graphite\",\n            grepl(pattern = \"Oil paint\", x = medium) ~ \"Oil Paint\",\n            grepl(pattern = \"Screenprint\", x = medium) ~ \"Screenprint\",\n            grepl(pattern = \"Watercolour\", x = medium) ~ \"Watercolour\",\n            grepl(pattern = \"photograph|Photograph\", x = medium) ~ \"Photograph\",\n            grepl(pattern = \"chalk|Chalk\", x = medium) ~ \"Chalk\"\n        )]\nartwork[,\n        color := case_when(\n            medium_cleaned %like% \"Graphite\" ~ color_pallete[1],\n            medium_cleaned %like% \"Paint\" ~ color_pallete[2],\n            medium_cleaned %like% \"Screenprint\" ~ color_pallete[6],\n            medium_cleaned %like% \"Watercolour\" ~ color_pallete[4],\n            medium_cleaned %like% \"Photograph\" ~ color_pallete[5],\n            medium_cleaned %like% \"Chalk\" ~ color_pallete[3]\n        )]\nmedium_dat_2 <- artwork[, .(year, medium_cleaned, color)]\n\nbees_plot <- medium_dat_2 %>%\n    filter(!is.na(medium_cleaned), !is.na(year)) %>%\n    arrange(year)\nbees_plot[, cutpts_numeric := cut(year, breaks = seq(1500, 2015, 5), labels = F)]\nbees_plot[, cutpts := cut(year, breaks = seq(1500, 2015, 5))]\nbees_plot[, xaxis := as.numeric(substr(cutpts, 2, 5))]\n\nbees_plot_reduced <-\n    bees_plot[, .N, .(xaxis, medium_cleaned, color, cutpts_numeric)]\nbees_plot_reduced[, num_pts := ceiling(N / 100)]\n\ndatlist <- list()\nfor (i in 1:nrow(bees_plot_reduced)) {\n    .nrows = bees_plot_reduced[i, num_pts]\n    .dlist <- list()\n    for (j in 1:.nrows) {\n        .dlist[[j]] <-\n            bees_plot_reduced[i, .(xaxis, medium_cleaned, color, cutpts_numeric)]\n    }\n    datlist[[i]] <- rbindlist(.dlist)\n}\n\nto_plot <- rbindlist(datlist)\nglimpse(to_plot)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 624\nColumns: 4\n$ xaxis          <dbl> 1540, 1555, 1560, 1565, 1570, 1575, 1585, 1590, 1595, 1…\n$ medium_cleaned <chr> \"Oil Paint\", \"Oil Paint\", \"Oil Paint\", \"Oil Paint\", \"Oi…\n$ color          <chr> \"#3e487a\", \"#3e487a\", \"#3e487a\", \"#3e487a\", \"#3e487a\", …\n$ cutpts_numeric <int> 9, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, …\n```\n:::\n:::\n\n::: {.cell .column-page layout-align=\"center\"}\n\n```{.r .cell-code}\nmake_plot <- function(to_plot) {\n    categories <- unique(to_plot[, .(medium_cleaned, color)])\n    xleg <- c(1.0,  2.8,  4.6,  6.8,  8.2, 10.0)\n    beeswarm(\n        xleg,\n        pwcol = categories$color,\n        horizontal = TRUE,\n        method = \"center\",\n        cex = 1.3,\n        pch = 19,\n        xlim = c(0, 12),\n        axes = FALSE\n    )\n    text(\n        x = xleg + 0.05,\n        y = 1,\n        labels = toupper(categories$medium_cleaned),\n        col = \"gray80\",\n        pos = 4,\n        cex = 0.9\n    )\n}\nmake_plot_2 <- function(to_plot) {\n    beeswarm(\n        x = to_plot$xaxis,\n        pwcol = to_plot$color,\n        horizontal = TRUE,\n        method = \"hex\",\n        spacing = 1.1,\n        cex = 1.5,\n        pch = 19,\n        xlim = c(1550, 2010),\n        axes = FALSE\n    )\n    x <- seq(from = 1550, to = 2000, by = 50)\n    axis(\n        side = 1,\n        labels = x,\n        at = x,\n        col = \"white\",\n        col.ticks = \"gray80\",\n        col.axis = \"gray60\"\n    )\n}\npar(\n    fig = c(0, 1, 0.7, 1),\n    new = TRUE,\n    bg = \"#292929\"\n    # family = \"Monoid\"\n)\nmake_plot(to_plot = to_plot)\npar(fig = c(0, 1, 0, 0.9), new = TRUE)\nmake_plot_2(to_plot = to_plot)\nmtext(\n    text = \"The Tate\",\n    side = 3,\n    cex = 2,\n    col = \"gray80\",\n    padj = -5\n)\nmtext(\n    text = \"THE TOP 6 MEDIUMS FOR 40,000 PIECES OF ART. EACH DOT REPRESENTS UPTO 100 ARTWORKS.\",\n    side = 3,\n    cex = 1,\n    col = \"gray80\",\n    padj = -5.5\n)\nmtext(\n    text = \"Image by @rsangole\",\n    side = 1,\n    cex = 0.9,\n    col = \"#3e487a\",\n    padj = 6,\n    adj = 1\n)\n```\n\n::: {.cell-output-display}\n![](2021-01-19-tidytuesday-the-tate-collection_files/figure-html/unnamed-chunk-3-1.png){fig-align='center' width=1152}\n:::\n:::",
    "supporting": [
      "2021-01-19-tidytuesday-the-tate-collection_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/twitter-widget-0.0.1/widgets.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}