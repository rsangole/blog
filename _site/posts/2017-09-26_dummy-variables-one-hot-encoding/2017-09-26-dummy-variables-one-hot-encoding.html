<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rahul">
<meta name="dcterms.date" content="2017-09-27">
<meta name="description" content="How do the four popular methods of creating dummy variables perform on large datasets? Let’s find out!">

<title>yHat - Performance Benchmarking for Dummy Variable Creation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-106573867-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>


<meta name="twitter:title" content="yHat - Performance Benchmarking for Dummy Variable Creation">
<meta name="twitter:description" content="How do the four popular methods of creating dummy variables perform on large datasets? Let’s find out!">
<meta name="twitter:creator" content="@rsangole">
<meta name="twitter:card" content="summary">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">yHat</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">~/</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html">~/blog</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html">~/projects</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../astronomy.html">~/astronomy</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#motivation" id="toc-motivation" class="nav-link active" data-scroll-target="#motivation">Motivation</a></li>
  <li><a href="#why-do-we-need-dummy-variables" id="toc-why-do-we-need-dummy-variables" class="nav-link" data-scroll-target="#why-do-we-need-dummy-variables">Why do we need dummy variables?</a></li>
  <li><a href="#ways-to-create-dummy-variables-in-r" id="toc-ways-to-create-dummy-variables-in-r" class="nav-link" data-scroll-target="#ways-to-create-dummy-variables-in-r">Ways to create dummy variables in R</a>
  <ul class="collapse">
  <li><a href="#stats-package" id="toc-stats-package" class="nav-link" data-scroll-target="#stats-package"><code>stats</code> package</a></li>
  <li><a href="#dummies-package" id="toc-dummies-package" class="nav-link" data-scroll-target="#dummies-package"><code>dummies</code> package</a></li>
  <li><a href="#dummy-package" id="toc-dummy-package" class="nav-link" data-scroll-target="#dummy-package"><code>dummy</code> package</a></li>
  <li><a href="#caret-package" id="toc-caret-package" class="nav-link" data-scroll-target="#caret-package"><code>caret</code> package</a></li>
  </ul></li>
  <li><a href="#performance-comparison" id="toc-performance-comparison" class="nav-link" data-scroll-target="#performance-comparison">Performance comparison</a>
  <ul class="collapse">
  <li><a href="#smaller-datasets" id="toc-smaller-datasets" class="nav-link" data-scroll-target="#smaller-datasets">Smaller datasets</a></li>
  <li><a href="#large-datasets" id="toc-large-datasets" class="nav-link" data-scroll-target="#large-datasets">Large datasets</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#qs" id="toc-qs" class="nav-link" data-scroll-target="#qs">Qs</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Performance Benchmarking for Dummy Variable Creation</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
  </div>
  </div>

<div>
  <div class="description">
    How do the four popular methods of creating dummy variables perform on large datasets? Let’s find out!
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Rahul </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 27, 2017</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="motivation" class="level2">
<h2 class="anchored" data-anchor-id="motivation">Motivation</h2>
<p>Very recently, at work, we got into a discussion about creation of dummy variables in R code. We were dealing with a fairly large dataset of roughly 500,000 observations for roughly 120 predictor variables. Almost all of them were categorical variables, many of them with a fairly large number of factor levels (think 20-100). The types of models we needed to investigate required creation of dummy variables (think <a href="http://xgboost.readthedocs.io">xgboost</a>). There are a few ways to convert categoricals into dummy variables in R. However, I did not find any comparison of performance for large datasets.</p>
<p>So here it goes.</p>
</section>
<section id="why-do-we-need-dummy-variables" class="level2">
<h2 class="anchored" data-anchor-id="why-do-we-need-dummy-variables">Why do we need dummy variables?</h2>
<p>I won’t say any more here. Plenty of good resources on the web: <a href="https://stats.idre.ucla.edu/other/mult-pkg/faq/general/faqwhat-is-dummy-coding/">here</a>, <a href="http://www.sjsu.edu/people/edward.cohen/courses/c2/s1/Week_14_dummy_variable_slides.pdf">here</a>, and <a href="http://www.polsci.ucsb.edu/faculty/glasgow/ps15/ps15lect15.pdf">here</a>.</p>
</section>
<section id="ways-to-create-dummy-variables-in-r" class="level2">
<h2 class="anchored" data-anchor-id="ways-to-create-dummy-variables-in-r">Ways to create dummy variables in R</h2>
<p>These are the methods I’ve found to create dummy variables in R. I’ve explored each of these</p>
<ul>
<li>stats::model.matrix()</li>
<li>dummies::dummy.data.frame()</li>
<li>dummy::dummy()<br>
</li>
<li>caret::dummyVars()</li>
</ul>
<p>Prepping some data to try these out. Using the <code>HairEyeColor</code> dataset as an example. It consists of 3 categorical vars and 1 numerical var. Perfect to try things out. Adding a response variable <code>Y</code> too.</p>
<div class="cell" data-hash="2017-09-26-dummy-variables-one-hot-encoding_cache/html/unnamed-chunk-1_18467bb0bb61953fb398bde9202dd4a9">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"HairEyeColor"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>HairEyeColor <span class="sc">%&lt;&gt;%</span> <span class="fu">tbl_df</span>()</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>HairEyeColor<span class="sc">$</span>Y <span class="ot">=</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="fu">dim</span>(HairEyeColor)[<span class="dv">1</span>],<span class="at">replace =</span> T) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'No'</span>,<span class="st">'Yes'</span>))</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(HairEyeColor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 32
Columns: 5
$ Hair &lt;chr&gt; "Black", "Brown", "Red", "Blond", "Black", "Brown", "Red", "Blond…
$ Eye  &lt;chr&gt; "Brown", "Brown", "Brown", "Brown", "Blue", "Blue", "Blue", "Blue…
$ Sex  &lt;chr&gt; "Male", "Male", "Male", "Male", "Male", "Male", "Male", "Male", "…
$ n    &lt;dbl&gt; 32, 53, 10, 3, 11, 50, 10, 30, 10, 25, 7, 5, 3, 15, 7, 8, 36, 66,…
$ Y    &lt;fct&gt; Yes, Yes, Yes, No, Yes, No, Yes, No, Yes, No, No, Yes, No, No, Ye…</code></pre>
</div>
</div>
<p>Let’s look at each package:</p>
<section id="stats-package" class="level3">
<h3 class="anchored" data-anchor-id="stats-package"><code>stats</code> package</h3>
<p>The <code>stats</code> package has a function called <code>model.matrix</code> which converts factor variables to dummy variables. It also drops the response variable.</p>
<p><em>Some pros</em></p>
<ul>
<li>Works with tibbles</li>
<li>Really fast</li>
<li>Retains numerical columns as is</li>
<li>Formula interface allows one to specify what <code>Y</code> is</li>
</ul>
<p><em>Some cons</em></p>
<ul>
<li>Need to add the response <code>Y</code> back into the mix, if we need it</li>
</ul>
<div class="cell" data-hash="2017-09-26-dummy-variables-one-hot-encoding_cache/html/unnamed-chunk-2_b1dfbab2b616f219a2e500b5660769dc">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">model.matrix</span>(Y<span class="sc">~</span>.<span class="sc">-</span><span class="dv">1</span>,HairEyeColor),<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  HairBlack HairBlond HairBrown HairRed EyeBrown EyeGreen EyeHazel SexMale  n
1         1         0         0       0        1        0        0       1 32
2         0         0         1       0        1        0        0       1 53
3         0         0         0       1        1        0        0       1 10</code></pre>
</div>
</div>
</section>
<section id="dummies-package" class="level3">
<h3 class="anchored" data-anchor-id="dummies-package"><code>dummies</code> package</h3>
<p><code>dummies</code> has a command called <code>dummy.data.frame</code> which does the needful.</p>
<p><em>Some pros</em></p>
<ul>
<li>Retains numerical columns as is</li>
<li>Can create based dummy variables for numeric columns too</li>
</ul>
<p><em>Some cons</em></p>
<ul>
<li>Doesn’t work with tibbles</li>
<li>Doesn’t have a formula interface to specify what <code>Y</code> is. Need to manually remove response variable from dataframe</li>
</ul>
<div class="cell" data-hash="2017-09-26-dummy-variables-one-hot-encoding_cache/html/unnamed-chunk-3_a02c6f327abf6977b6fba089d3310a2d">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dummies)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">dummy.data.frame</span>(<span class="at">data =</span> <span class="fu">as.data.frame</span>(HairEyeColor),<span class="at">sep=</span><span class="st">"."</span>),<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Hair.Black Hair.Blond Hair.Brown Hair.Red Eye.Blue Eye.Brown Eye.Green
1          1          0          0        0        0         1         0
2          0          0          1        0        0         1         0
3          0          0          0        1        0         1         0
  Eye.Hazel Sex.Female Sex.Male  n Y.No Y.Yes
1         0          0        1 32    0     1
2         0          0        1 53    0     1
3         0          0        1 10    0     1</code></pre>
</div>
</div>
</section>
<section id="dummy-package" class="level3">
<h3 class="anchored" data-anchor-id="dummy-package"><code>dummy</code> package</h3>
<p><code>dummy</code> creates dummy variables of all the factors and character vectors in a data frame. It also supports settings in which the user only wants to compute dummies for the categorical values that were present in another data set. This is especially useful in the context of predictive modeling, in which the new (test) data has more or other categories than the training data. <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p><em>Some pros</em></p>
<ul>
<li>Works with tibbles</li>
<li>Retains numerical columns as is</li>
<li>Can create based dummy variables for numeric columns too</li>
<li><code>p</code> parameter can select terms in terms of frequency</li>
<li>Can grab only those variables in a separate dataframe</li>
<li>Can create based dummy variables for numeric columns too</li>
</ul>
<p><em>Some cons</em></p>
<ul>
<li>Doesn’t have a formula interface to specify what <code>Y</code> is. Need to manually remove response variable from dataframe</li>
</ul>
<div class="cell" data-hash="2017-09-26-dummy-variables-one-hot-encoding_cache/html/unnamed-chunk-4_2adaaa2132dad0181031362b6b32edae">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dummy)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">dummy</span>(HairEyeColor),<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Hair_Black Hair_Blond Hair_Brown Hair_Red Eye_Blue Eye_Brown Eye_Green
1          1          0          0        0        0         1         0
2          0          0          1        0        0         1         0
3          0          0          0        1        0         1         0
  Eye_Hazel Sex_Female Sex_Male Y_No Y_Yes
1         0          0        1    0     1
2         0          0        1    0     1
3         0          0        1    0     1</code></pre>
</div>
</div>
<p><em>Side note:</em> there’s a useful feature to grab all the categories in a factor variable.</p>
<div class="cell" data-hash="2017-09-26-dummy-variables-one-hot-encoding_cache/html/unnamed-chunk-5_eb5e51606652bad1212aa74964b908ff">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">categories</span>(HairEyeColor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Hair
[1] "Black" "Blond" "Brown" "Red"  

$Eye
[1] "Blue"  "Brown" "Green" "Hazel"

$Sex
[1] "Female" "Male"  

$Y
[1] "No"  "Yes"</code></pre>
</div>
</div>
</section>
<section id="caret-package" class="level3">
<h3 class="anchored" data-anchor-id="caret-package"><code>caret</code> package</h3>
<p>Lastly, there’s the <code>caret</code> package’s <code>dummyVars()</code>. This follows a different paradigm. First, we create reciepe of sorts, which just creates an object that specifies how the dataframe gets dummy-fied. Then, use the <code>predict()</code> to make the actual conversions.</p>
<p><em>Some pros</em></p>
<ul>
<li>Works on creating full rank &amp; less than full rank matrix post-conversion</li>
<li>Has a feature to keep only the level names in the final dummy columns</li>
<li>Can directly create a sparse matrix</li>
<li>Retains numerical columns as is</li>
</ul>
<p><em>Some cons</em></p>
<ul>
<li><code>Y</code> needs a factor</li>
<li>If the cateogical variables aren’t factors, you can’t use the <code>sep=' '</code> feature</li>
</ul>
<div class="cell" data-hash="2017-09-26-dummy-variables-one-hot-encoding_cache/html/unnamed-chunk-6_4539745b9471e9be5f5143b4790acca4">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>HairEyeColor<span class="sc">$</span>Hair <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(HairEyeColor<span class="sc">$</span>Hair)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>HairEyeColor<span class="sc">$</span>Eye <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(HairEyeColor<span class="sc">$</span>Eye)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>HairEyeColor<span class="sc">$</span>Sex <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(HairEyeColor<span class="sc">$</span>Sex)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>dV <span class="ot">&lt;-</span> <span class="fu">dummyVars</span>(<span class="at">formula =</span> Y<span class="sc">~</span>.,<span class="at">data =</span> HairEyeColor)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>dV</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dummy Variable Object

Formula: Y ~ .
5 variables, 4 factors
Variables and levels will be separated by '.'
A less than full rank encoding is used</code></pre>
</div>
</div>
<div class="cell" data-hash="2017-09-26-dummy-variables-one-hot-encoding_cache/html/unnamed-chunk-7_a96121ec20926be223e298d4743b48a4">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">predict</span>(<span class="at">object =</span> dV, <span class="at">newdata =</span> HairEyeColor),<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Hair.Black Hair.Blond Hair.Brown Hair.Red Eye.Blue Eye.Brown Eye.Green
1          1          0          0        0        0         1         0
2          0          0          1        0        0         1         0
3          0          0          0        1        0         1         0
  Eye.Hazel Sex.Female Sex.Male  n
1         0          0        1 32
2         0          0        1 53
3         0          0        1 10</code></pre>
</div>
</div>
</section>
</section>
<section id="performance-comparison" class="level2">
<h2 class="anchored" data-anchor-id="performance-comparison">Performance comparison</h2>
<p>I’ve run these benchmarks on my Macbook Pro with these specs:</p>
<ul>
<li>Processor Name: Intel Core i5</li>
<li>Processor Speed: 2.4 GHz</li>
<li>Number of Processors: 1</li>
<li>Total Number of Cores: 2</li>
<li>L2 Cache (per Core): 256 KB</li>
<li>L3 Cache: 3 MB</li>
<li>Memory: 8 GB</li>
</ul>
<section id="smaller-datasets" class="level3">
<h3 class="anchored" data-anchor-id="smaller-datasets">Smaller datasets</h3>
<p>The first dataset used is the <code>HairEyeColor</code>. 32 rows, 1 numeric var, 3 categorical var. All the resulting dataframes are as similar as possible… they all retain the <code>Y</code> variable at the end.</p>
<div class="cell" data-hash="2017-09-26-dummy-variables-one-hot-encoding_cache/html/unnamed-chunk-8_aba05315a5eb427bf714ccc351e7dd9d">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(microbenchmark)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>HairEyeColor_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(HairEyeColor)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>stats_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(D){</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    stats<span class="sc">::</span><span class="fu">model.matrix</span>(Y<span class="sc">~</span>.<span class="sc">-</span><span class="dv">1</span>,D) <span class="sc">%&gt;%</span> </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cbind</span>(D<span class="sc">$</span>Y)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>dummies_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(D){</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    dummies<span class="sc">::</span><span class="fu">dummy.data.frame</span>(D[,<span class="sc">-</span><span class="dv">5</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cbind</span>(D<span class="sc">$</span>Y)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>dummy_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(D){</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    dummy<span class="sc">::</span><span class="fu">dummy</span>(D[,<span class="sc">-</span><span class="dv">5</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cbind</span>(D<span class="sc">$</span>Y)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>caret_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(D){</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    dV <span class="ot">&lt;-</span> caret<span class="sc">::</span><span class="fu">dummyVars</span>(<span class="at">formula =</span> Y<span class="sc">~</span>.,<span class="at">data =</span> D)</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">predict</span>(<span class="at">object =</span> dV, <span class="at">newdata =</span> D) <span class="sc">%&gt;%</span> </span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cbind</span>(D<span class="sc">$</span>Y)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>microbenchmark<span class="sc">::</span><span class="fu">microbenchmark</span>(</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">stats =</span> <span class="fu">stats_fn</span>(<span class="at">D =</span> HairEyeColor),</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">dummies =</span> <span class="fu">dummies_fn</span>(<span class="at">D =</span> HairEyeColor_df),</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">dummy =</span> <span class="fu">dummy_fn</span>(<span class="at">D =</span> HairEyeColor),</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">caret =</span> <span class="fu">caret_fn</span>(<span class="at">D =</span> HairEyeColor),</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">times =</span> 1000L,</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">list</span>(<span class="at">order =</span> <span class="st">'block'</span>),</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">unit =</span> <span class="st">'s'</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>    ) <span class="ot">-&gt;</span> benchmarks</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(benchmarks)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2017-09-26-dummy-variables-one-hot-encoding_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The results speak for themself. The <code>stats</code> is clearly the fastest with <code>dummies</code> and <code>caret</code> being a more distant 2nd &amp; 3rd.</p>
</section>
<section id="large-datasets" class="level3">
<h3 class="anchored" data-anchor-id="large-datasets">Large datasets</h3>
<p>To leverage a large dataset for this analysis, I’m using the <a href="https://www.kaggle.com/daveianhickey/2000-16-traffic-flow-england-scotland-wales/data">Accident &amp; Traffic Flow</a> dataset, which is fairly big - 570,011 rows and 33 columns. I’ve narrowed down to 7 categorical variables to test the packages, and I’ve created a fake response variable as well.</p>
<div class="cell" data-hash="2017-09-26-dummy-variables-one-hot-encoding_cache/html/unnamed-chunk-9_9e26e0b1cca373f7c9d2ee949e4b6c60">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'~/github/github.com/blog-large-data/accidents_2005_to_2007.csv'</span>,<span class="at">progress =</span> F)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&lt;&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">transmute</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">Day_of_Week =</span> <span class="fu">as.factor</span>(Day_of_Week),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">Road_Type =</span> Road_Type <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">'[()/ ]'</span>,<span class="st">'.'</span>) <span class="sc">%&gt;%</span> as.factor,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">Weather =</span> Weather_Conditions <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">'[()/ ]'</span>,<span class="st">'.'</span>) <span class="sc">%&gt;%</span> as.factor,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">RoadSurface =</span> Road_Surface_Conditions <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">'[()/ ]'</span>,<span class="st">'.'</span>) <span class="sc">%&gt;%</span> as.factor,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">PedHC =</span>  <span class="st">`</span><span class="at">Pedestrian_Crossing-Human_Control</span><span class="st">`</span> <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">'[()/ ]'</span>,<span class="st">'.'</span>) <span class="sc">%&gt;%</span> as.factor,</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">PedPF =</span>  <span class="st">`</span><span class="at">Pedestrian_Crossing-Physical_Facilities</span><span class="st">`</span> <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">'[()/ ]'</span>,<span class="st">'.'</span>) <span class="sc">%&gt;%</span> as.factor,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">Year =</span>  <span class="fu">as.factor</span>(Year)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">Y =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="fu">dim</span>(data)[<span class="dv">1</span>],<span class="at">replace =</span> T) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'No'</span>,<span class="st">'Yes'</span>))</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 570011      8</code></pre>
</div>
</div>
<p>In total, there will be 39 dummy variable columns created for these 7 factor variables, as we can see here:</p>
<div class="cell" data-hash="2017-09-26-dummy-variables-one-hot-encoding_cache/html/unnamed-chunk-10_838b03d3fe16fcd598a131bb271f4f9f">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_int</span>(data,<span class="sc">~</span><span class="fu">length</span>(<span class="fu">levels</span>(.x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Day_of_Week   Road_Type     Weather RoadSurface       PedHC       PedPF 
          7           6           9           5           3           6 
       Year           Y 
          3           2 </code></pre>
</div>
</div>
<p>Now for the benchmarks:</p>
<div class="cell" data-hash="2017-09-26-dummy-variables-one-hot-encoding_cache/html/unnamed-chunk-11_8e5ceaa80fc166d4b8fdb68dc2705ab0">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>data_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(data)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>stats_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(D){</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    stats<span class="sc">::</span><span class="fu">model.matrix</span>(Y<span class="sc">~</span>.<span class="sc">-</span><span class="dv">1</span>,D) <span class="sc">%&gt;%</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cbind</span>(D<span class="sc">$</span>Y)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>dummies_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(D){</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    dummies<span class="sc">::</span><span class="fu">dummy.data.frame</span>(D[,<span class="sc">-</span><span class="dv">8</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cbind</span>(D<span class="sc">$</span>Y)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>dummy_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(D){</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    dummy<span class="sc">::</span><span class="fu">dummy</span>(D[,<span class="sc">-</span><span class="dv">8</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cbind</span>(D<span class="sc">$</span>Y)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>caret_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(D){</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    dV <span class="ot">&lt;-</span> caret<span class="sc">::</span><span class="fu">dummyVars</span>(<span class="at">formula =</span> Y<span class="sc">~</span>.,<span class="at">data =</span> D)</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">predict</span>(<span class="at">object =</span> dV, <span class="at">newdata =</span> D) <span class="sc">%&gt;%</span> </span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cbind</span>(D<span class="sc">$</span>Y)</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>microbenchmark<span class="sc">::</span><span class="fu">microbenchmark</span>(</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">stats =</span> <span class="fu">stats_fn</span>(<span class="at">D =</span> data),</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">dummies =</span> <span class="fu">dummies_fn</span>(<span class="at">D =</span> data_df),</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">dummy =</span> <span class="fu">dummy_fn</span>(<span class="at">D =</span> data),</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">caret =</span> <span class="fu">caret_fn</span>(<span class="at">D =</span> data),</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">times =</span> 30L,</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">list</span>(<span class="at">order =</span> <span class="st">'block'</span>)</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>    ) <span class="ot">-&gt;</span> benchmarks</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(benchmarks)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2017-09-26-dummy-variables-one-hot-encoding_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Just like before, <code>stats</code> is clerly the fastest.</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<ul>
<li>Stick to <code>stats::model.matrix()</code>. It works with tibbles, it’s fast, and it takes a formula.</li>
<li>If you like the <code>caret</code> package and it’s interface, it’s the 2nd best choice.</li>
<li><code>dummy</code> or <code>dummies</code> doesn’t seem to offer any advantages to these packages.</li>
</ul>
</section>
<section id="qs" class="level2">
<h2 class="anchored" data-anchor-id="qs">Qs</h2>
<ul>
<li>Are there other packages you recommend for dummy variable creation? If yes, please let me know in the comments.</li>
<li>Could you run the bench marks on more powerful machines and larger datasets, and share your results? I’d like to append them here.</li>
</ul>


</section>


<div id="quarto-appendix" class="default"><section class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1" role="doc-endnote"><p>Straight from the <code>dummy</code> <a href="https://cran.r-project.org/web/packages/dummy/dummy.pdf">help file</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<div>
<hr>

<p> Subscribe to my newsletter! </p>

<iframe id="beehiiv-form" src="https://embeds.beehiiv.com/f1edc1d7-9d22-462b-935c-78e350a21f60?slim=true" data-test-id="beehiiv-embed" frameborder="0" scrolling="no" style="margin: 0; border-radius: 0px !important; background-color: transparent; height: 55px;"></iframe>

</div>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="rsangole/blog_comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">2022 rahul-s</div>
  </div>
</footer>



</body></html>