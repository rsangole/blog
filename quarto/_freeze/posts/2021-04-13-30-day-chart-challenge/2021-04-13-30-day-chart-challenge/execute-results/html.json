{
  "hash": "1d50e95a822d119de0afc2c84096a907",
  "result": {
    "markdown": "---\ntitle: Visualizing Correlations \ndate: '2021-04-13'\ndescription: Correlation plot for Kepler's Planets, for day 13 of the 2021 30-day-chart-challenge\ncategories:\n  - Visualization\nimage: graph.png\n---\n\n::: {.cell .column-page layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(ggdark)\nlibrary(ggtext)\nlibrary(ggforce)\n\n# https://data.world/markmarkoh/kepler-confirmed-planets\ndat <- data.table::fread(\"planets.csv\")\n\nhull_a <- dat %>% \n  select(st_rad, st_mass) %>% \n  filter(st_rad > 0.335 & st_rad < 2.95 & st_mass < 2) %>% \n  tidyr::drop_na()\ncor_a <- scales::label_number(accuracy = 0.01)(cor(hull_a)[1, 2])\n\nhull_b <- dat %>% \n  select(st_rad, st_mass) %>% \n  filter(st_rad > 2.95) %>% \n  tidyr::drop_na()\ncor_b <- scales::label_number(accuracy = 0.01)(cor(hull_b)[1,2])\n\n# https://coolors.co/1c1f35-151728-44243e-723054-68838c-4e636a-4ab6d3\npt_color <- \"#6BC3DB\"\nhull_color <- \"#68838C\"\naxis_text_color <- \"#68838C\"\ncaption_color <- \"#4E636A\"\ngrid_color <- \"#1C1F35\"\nplot_title_color <- \"#903C6A\"\nbg_color <- \"#151728\"\n\ndat %>%\n  ggplot(aes(x = st_rad, y = st_mass)) +\n  geom_point(\n    colour = pt_color,\n    pch = 21,\n    size = 1,\n    alpha = 0.3\n  ) +\n  geom_mark_hull(\n    data = hull_a,\n    aes(label = glue::glue(\"Group A\\nCorr: {cor_a}\")),\n    concavity = 10,\n    color = hull_color,\n    size = 0.3,\n    radius = .02,\n    con.cap = 0,\n    con.colour = hull_color,\n    con.border = \"none\",\n    label.fill = bg_color,\n    label.colour = hull_color,\n    label.margin = margin(1, 1, 1, 1, \"mm\")\n  ) +\n  geom_mark_hull(\n    data = hull_b,\n    aes(label = glue::glue(\"Group B\\nCorr: {cor_b}\")),\n    concavity = 10,\n    color = hull_color,\n    size = 0.3,\n    radius = .02,\n    con.cap = 0,\n    con.colour = hull_color,\n    con.border = \"none\",\n    label.fill = bg_color,\n    label.colour = hull_color,\n    label.margin = margin(1, 1, 1, 1, \"mm\")\n  ) +\n  annotate(\n    geom = \"curve\",\n    xend = 0.09,\n    yend = 0.06,\n    x = 0.09 - 0.01,\n    y = 0.06 + 0.1,\n    curvature = -.3,\n    arrow = arrow(length = unit(0, \"mm\")),\n    color = hull_color\n  ) +\n  annotate(\n    geom = \"text\",\n    x = 0.09 - 0.01,\n    y = 0.06 + 0.1,\n    label = \"Each point\\nis a star\",\n    hjust = \"right\",\n    size = 3.4,\n    color = hull_color\n  ) +\n  scale_x_continuous(trans = \"log10\",\n                     labels =\n                       scales::label_number(suffix = \"x\",\n                                            accuracy = 1,)) +\n  scale_y_continuous(labels =\n                       scales::label_number(suffix = \"x\",\n                                            accuracy = 1,)) +\n  dark_theme_minimal() +\n  coord_cartesian(ylim = c(0, 3), clip = \"off\") +\n  theme(\n    plot.background = element_rect(color = bg_color, \n                                   fill = bg_color),\n    panel.grid.minor = element_blank(),\n    panel.grid.major = element_line(color = grid_color),\n    axis.text = element_text(size = 12, color = axis_text_color),\n    axis.title.y = element_text(size = 14, color = axis_text_color),\n    axis.title.x = element_text(size = 14, color = axis_text_color),\n    plot.title = element_markdown(\n      family = \"Inter-Medium\",\n      color = plot_title_color,\n      size = 22,\n      margin = margin(0, 0, 0.5, 0, unit = \"line\")\n    ),\n    plot.title.position = \"plot\",\n    plot.subtitle = element_markdown(\n      color = plot_title_color,\n      size = 12,\n      lineheight = 1.2,\n      margin = margin(0, 0, 1, 0, unit = \"line\")\n    ),\n    plot.margin = margin(1.5, 1.5, 1, 1.5, unit = \"line\"),\n    legend.position = c(0.9, 0.1),\n    plot.caption = element_text(colour = caption_color, size = 10)\n  ) +\n  labs(\n    x = \"Radius compared to the Sun\",\n    y = \"Mass compared to the Sun\",\n    title = \"Stars of the Kepler K2 Mission\",\n    subtitle = glue::glue(\"The Kepler K2 mission was a 5-year long expedition searching for Earth-like or smaller planets orbiting stars in our galaxy.<br />Kepler was a special-purpose spacecraft that precisely measured the light variations from thousands of distant stars, looking for planetary transits.<br />This graphic shows the relationship between the stellar mass & stellar radii of {n} stars, with a potential {pl_n} orbiting exoplanets.<br />It's fascinating to see two distinct clusters: stars with very high correlation between mass and radius, and those with radii > 3x our sun, <br /> with near-zero correlation between mass & radii.\",\n                          pl_n = scales::label_comma(accuracy = 10)(dat[,sum(pl_pnum)]),\n                          n = scales::label_comma(accuracy = 10)(dat %>% count(pl_hostname) %>% nrow())),\n    caption = \"DAY 13 - #30DayChartChallenge\\nDATASET BY @markmarkoh\\nPLOT BY @rsangole\"\n  )\n```\n\n::: {.cell-output-display}\n![](2021-04-13-30-day-chart-challenge_files/figure-html/unnamed-chunk-1-1.png){fig-align='center' width=1152}\n:::\n:::\n\n\n<!-- ## Day 14 - Space -->\n\n<!-- ```{r echo=TRUE, message=FALSE, warning=FALSE} -->\n<!-- library(tidyverse) -->\n<!-- library(ggplot2) -->\n<!-- library(ggdark) -->\n<!-- library(ggtext) -->\n<!-- library(ggforce) -->\n\n<!-- # https://api.nasa.gov -->\n\n<!-- download_mars_rover_manifests <- function(rover_name, -->\n<!--                                           BASE_URL = \"https://api.nasa.gov/mars-photos/api/v1/\", -->\n<!--                                           END_PT = \"manifests/\"){ -->\n\n<!--   curl_url <- glue::glue(\"curl -s '{BASE_URL}{END_PT}{rover_name}?api_key={Sys.getenv(\\\"NASA_API_KEY\\\")}'\") -->\n\n<!--   jq <- \"'.photo_manifest.photos[] | {sol: .sol, date: .earth_date, photos: .total_photos, cameras: .cameras | to_entries[]} | [.sol, .date, .photos, .cameras.value] | @tsv'\" -->\n\n<!--   cmd <- glue::glue(\"{curl_url} | jq -r {jq}\") -->\n\n<!--   data.table::fread( -->\n<!--     cmd = cmd, -->\n<!--     col.names = c(\"sol\", \"date\", \"photos\", \"camera\") -->\n<!--   ) %>%  -->\n<!--     dplyr::mutate(rover = rover_name) -->\n\n<!-- } -->\n\n<!-- rovers <- c(\"curiosity\", \"opportunity\", \"spirit\") -->\n\n<!-- dat <- lapply(rovers, download_mars_rover_manifests) %>%  -->\n<!--   data.table::rbindlist() -->\n<!-- dat[, date := as.Date(date)] -->\n<!-- ``` -->\n\n<!-- ```{r} -->\n<!-- dat %>%  -->\n<!--   group_by(sol, rover) %>%  -->\n<!--   summarize(sol_photos = sum(photos)) %>%  -->\n<!--   ggplot(aes(sol, sol_photos)) +  -->\n<!--   geom_line(aes(color = rover)) -->\n<!-- ``` -->\n\n<!-- ```{r} -->\n<!-- dat %>%  -->\n<!--   group_by(sol, rover) %>%  -->\n<!--   summarize(sol_photos = sum(photos)) %>%  -->\n<!-- # %>%  -->\n<!-- #   tidyr::pivot_wider(names_from = \"rover\", values_from = \"sol_photos\", -->\n<!-- #                      values_fill = 0) %>%  -->\n<!-- #   ungroup() %>%  -->\n<!--   data.table::as.data.table()-> dat_long -->\n<!-- dat_long[, cur_cusum := cumsum(curiosity)] -->\n<!-- dat_long[, oppr_cusum := cumsum(curiosity)] -->\n\n\n<!-- dat_long <- dat[, .(sol_photos = sum(photos)), .(sol, rover)] -->\n<!-- data.table::setkey(dat_long, \"sol\") -->\n<!-- cumsum_photos <- dat_long[, .(sol_photos = cumsum(sol_photos)), .(rover)] -->\n<!-- cumsum_photos[, sol := 1:.N, rover] -->\n<!-- cumsum_photos %>%  -->\n<!--   ggplot(aes(sol, sol_photos)) +  -->\n<!--   geom_line(aes(color = rover)) +  -->\n<!--   scale_y_continuous(labels = scales::label_number_si()) + -->\n<!--   theme_bw() -->\n<!-- ``` -->\n\n<!-- ```{r fig.height=7} -->\n<!-- library(ggTimeSeries) -->\n<!-- library(hrbrthemes) -->\n<!-- cam_tbl <- tribble( -->\n<!--   ~camera, ~cam, -->\n<!-- \"PANCAM\",\t\"Panoramic\", -->\n<!-- \"FHAZ\",\t\"Front Hazard\", -->\n<!-- \"RHAZ\",\t\"Rear Hazard\", -->\n<!-- \"NAVCAM\",\t\"Navigation\", -->\n<!-- \"MAST\",\t\"Mast\", -->\n<!-- \"CHEMCAM\",\t\"Chemistry\", -->\n<!-- \"MAHLI\",\t\"Hand Lens\", -->\n<!-- \"MARDI\",\t\"Descent\", -->\n<!-- \"MINITES\",\t\"Thermal\", -->\n<!-- \"ENTRY\", \"Entry\") -->\n\n<!-- dat %>%  -->\n<!--   select(sol, photos, rover) %>%  -->\n<!--   distinct() %>%  -->\n<!--   # pivot_wider(names_from = \"rover\",  -->\n<!--   #             values_from = \"photos\",  -->\n<!--   #             values_fill = 0) %>% -->\n<!--   # pivot_longer(-sol, -->\n<!--   #              values_to = \"photos\", -->\n<!--   #              names_to = \"rover\") %>%  -->\n<!--   arrange(sol) %>%  -->\n<!--   ggplot(aes(x = sol,  -->\n<!--            y = photos, -->\n<!--            color = rover, -->\n<!--            fill = rover)) + -->\n<!--  # geom_area() +  -->\n<!--  scale_y_continuous(labels = scales::label_number_si()) + -->\n<!--  geom_line() + -->\n<!--   # facet_wrap(~rover, ncol = 1) +# scales = \"free_y\") + -->\n<!--   theme_ft_rc() + -->\n<!--   theme(legend.position = \"none\") + -->\n<!--   labs(x = \"sol\", -->\n<!--        y = \"Number of Photos Taken\")-> p1 -->\n\n<!-- gimme_pie <- function(dat,  -->\n<!--                       .rover, -->\n<!--                       legend_pos = \"none\") { -->\n<!--   dat %>% -->\n<!--     group_by(rover) %>% -->\n<!--     count(camera) %>% -->\n<!--     left_join(cam_tbl) %>% -->\n<!--     group_by(rover) %>% -->\n<!--     mutate(total_photos = sum(n), -->\n<!--            pc = n / total_photos) %>% -->\n<!--     arrange(rover, n) %>% -->\n<!--     mutate( -->\n<!--       ymax = cumsum(pc), -->\n<!--       ymin = c(0, head(ymax, -1)), -->\n<!--       labelPosition = (ymin + ymax) / 2, -->\n<!--       label = glue::glue(\"{scales::label_number_si()(n)}\") -->\n<!--     ) %>% -->\n<!--     filter(rover == .rover) %>% -->\n<!--     mutate(cam = factor(cam, levels = cam_tbl$cam)) %>%  -->\n<!--     ggplot(aes( -->\n<!--       ymax = ymax, -->\n<!--       ymin = ymin, -->\n<!--       xmax = 4, -->\n<!--       xmin = 3, -->\n<!--       fill = cam -->\n<!--     )) + -->\n<!--     geom_rect() + -->\n<!--     annotate(geom = \"text\",  -->\n<!--              x = 2,  -->\n<!--              y = 0,  -->\n<!--              label = toupper(.rover), -->\n<!--              size = 4.5, -->\n<!--              color = \"white\") + -->\n<!--     coord_polar(theta = \"y\") + -->\n<!--     xlim(c(2, 4)) + -->\n<!--     theme_ft_rc() + -->\n<!--     theme( -->\n<!--       panel.grid.minor = element_blank(), -->\n<!--       panel.grid.major = element_blank(), -->\n<!--       axis.text = element_blank(), -->\n<!--       axis.text.x = element_blank(), -->\n<!--       axis.text.y = element_blank(), -->\n<!--       text = element_blank(), -->\n<!--       axis.title.x = element_blank(), -->\n<!--       axis.title.y = element_blank(), -->\n<!--       legend.position = legend_pos, -->\n<!--       strip.text = element_blank(), -->\n<!--       plot.margin = unit(c(1,1,1,1), \"mm\"), -->\n<!--       panel.border = element_blank() -->\n<!--     ) -->\n<!-- } -->\n<!-- p2 <- gimme_pie(dat, \"curiosity\") -->\n<!-- p3 <- gimme_pie(dat, \"spirit\") -->\n<!-- p4 <- gimme_pie(dat, \"opportunity\") -->\n<!-- # p1 / (p2 + p3 + p4) +  -->\n<!-- #   plot_layout(heights = c(1.5, 1)) +  -->\n<!-- #   theme(panel.background = element_rect(fill = theme_ft_rc()$rect$fill)) -->\n\n<!-- # install.packages(\"cowplot\") -->\n<!-- library(\"cowplot\") -->\n<!-- cowplot::plot_grid( -->\n<!--   p1,  -->\n<!--   cowplot::plot_grid(p3, p4, p2, nrow = 1), -->\n<!--   nrow = 2, -->\n<!--   rel_heights = c(2, 1) -->\n<!-- ) +  -->\n<!--   theme(panel.background = element_rect(fill = theme_ft_rc()$rect$fill)) -->\n<!-- ``` -->\n\n<!-- ```{r} -->\n<!-- # install.packages(\"billboarder\") -->\n<!-- library(\"billboarder\") -->\n\n<!-- dat %>% -->\n<!--     group_by(rover) %>% -->\n<!--     count(camera) %>% -->\n<!--     left_join(cam_tbl) %>% -->\n<!--     group_by(rover) %>% -->\n<!--     mutate(total_photos = sum(n), -->\n<!--            pc = n / total_photos) %>% -->\n<!--     arrange(rover, n) %>% -->\n<!--     mutate( -->\n<!--       ymax = cumsum(pc), -->\n<!--       ymin = c(0, head(ymax, -1)), -->\n<!--       labelPosition = (ymin + ymax) / 2, -->\n<!--       label = glue::glue(\"{scales::label_number_si()(n)}\") -->\n<!--     ) %>% -->\n<!--     filter(rover == \"curiosity\") %>% -->\n<!--     mutate(cam = factor(cam, levels = cam_tbl$cam)) %>%  -->\n<!--     ggplot(aes( -->\n<!--       ymax = ymax, -->\n<!--       ymin = ymin, -->\n<!--       xmax = 4, -->\n<!--       xmin = 3, -->\n<!--       fill = cam -->\n<!--     )) + -->\n<!--     geom_rect() + -->\n<!--     annotate(geom = \"text\",  -->\n<!--              x = 2,  -->\n<!--              y = 0,  -->\n<!--              label = toupper(\"curiosity\"), -->\n<!--              size = 4.5, -->\n<!--              color = \"white\") + -->\n<!--     coord_polar(theta = \"y\") + -->\n<!--     xlim(c(2, 4)) + -->\n<!--     theme_ft_rc() + -->\n<!--     theme( -->\n<!--       panel.grid.minor = element_blank(), -->\n<!--       panel.grid.major = element_blank(), -->\n<!--       axis.text = element_blank(), -->\n<!--       axis.text.x = element_blank(), -->\n<!--       axis.text.y = element_blank(), -->\n<!--       # text = element_blank(), -->\n<!--       axis.title.x = element_blank(), -->\n<!--       axis.title.y = element_blank(), -->\n<!--       legend.position = \"bottom\", -->\n<!--       legend.title = element_blank(), -->\n<!--       legend.spacing.x = unit(6, 'mm'), -->\n<!--       legend.direction = \"horizontal\", -->\n<!--       strip.text = element_blank(), -->\n<!--       plot.margin = unit(c(0,0,0,0), \"mm\"), -->\n<!--       panel.border = element_blank(), -->\n<!--       panel.background = element_rect(fill = theme_ft_rc()$rect$fill) -->\n<!--     ) -->\n<!-- ``` -->\n\n\n<!-- ```{r} -->\n<!-- dat_smooth <- dat %>%  -->\n<!--   select(sol, photos, rover) %>%  -->\n<!--   distinct() %>%  -->\n<!--   pivot_wider(names_from = \"rover\",  -->\n<!--               values_from = \"photos\",  -->\n<!--               values_fill = 0) %>%  -->\n<!--   arrange(sol) -->\n\n<!-- dat_smooth$cur_low = lowess(dat_smooth$sol, dat_smooth$curiosity, -->\n<!--                             f = 0.00001)$y -->\n\n<!-- dat_smooth$cur_low = TTR::SMA(dat_smooth$curiosity, n = 10) -->\n<!-- dat_smooth %>%  -->\n<!--   ggplot(aes(x = sol)) + -->\n<!--   geom_line(aes(y = curiosity)) + -->\n<!--   geom_line(aes(y = cur_low), color = \"red\") -->\n\n<!-- ``` -->\n\n\n<!-- ```{r} -->\n<!-- dat %>%  -->\n<!--     select(sol, photos, rover) %>%  -->\n<!--     distinct() %>%  -->\n<!--   ggplot(aes(photos,fill=rover)) + -->\n<!--   geom_density() + -->\n<!--   theme_ft_rc() -->\n<!-- ``` -->\n\n\n<!-- ```{r} -->\n<!-- dat_long_by_date <- dat[, .(sol_photos = sum(photos)), .(date, rover)] -->\n<!-- data.table::setkey(dat_long_by_date, \"date\") -->\n\n<!-- library(patchwork) -->\n\n<!-- p1 <- dat_long_by_date %>% -->\n<!--   filter(rover == \"curiosity\") %>% -->\n<!--   ggplot_calendar_heatmap('date', -->\n<!--                           'sol_photos', -->\n<!--                           monthBorderSize = 0.1, -->\n<!--                           dayBorderColour = 0.3) + -->\n<!--   scale_fill_continuous(low = 'green', high = 'red') + -->\n<!--   facet_wrap(~ Year, ncol = 1) +  -->\n<!--   xlab(NULL) +  -->\n<!--   ylab(NULL) +  -->\n<!--   scale_fill_continuous(low = 'green', high = 'red') +  -->\n<!--   theme( -->\n<!--     axis.text = element_blank(), -->\n<!--     axis.ticks = element_blank(), -->\n<!--     panel.grid = element_blank(), -->\n<!--     panel.background = element_blank() -->\n<!-- ,    # legend.position = 'none', -->\n<!--     strip.background = element_blank() -->\n<!--   ) -->\n<!-- p2 <- dat_long_by_date %>% -->\n<!--   filter(rover == \"spirit\") %>% -->\n<!--   ggplot_calendar_heatmap('date', -->\n<!--                           'sol_photos', -->\n<!--                           monthBorderSize = 0.1, -->\n<!--                           dayBorderColour = 0.3) + -->\n<!--   scale_fill_continuous(low = 'green', high = 'red') + -->\n<!--   facet_wrap(~ Year, ncol = 1) +  -->\n<!--   xlab(NULL) +  -->\n<!--   ylab(NULL) +  -->\n<!--   scale_fill_continuous(low = 'green', high = 'red') +  -->\n<!--   theme( -->\n<!--     axis.text = element_blank(), -->\n<!--     axis.ticks = element_blank(), -->\n<!--     panel.grid = element_blank(), -->\n<!--     panel.background = element_blank() -->\n<!-- ,    # legend.position = 'none', -->\n<!--     strip.background = element_blank() -->\n<!--   ) -->\n<!-- p1 | p2 -->\n<!-- ``` -->\n\n\n\n<!-- ```{r} -->\n<!-- # install.packages(\"gganimate\") -->\n<!-- # library(\"gganimate\") -->\n<!-- # dat[,sum(photos),.(sol, camera,rover)] %>%  -->\n<!-- #   filter(rover == \"spirit\") %>%  -->\n<!-- #   ggplot(aes(area = V1, -->\n<!-- #              fill = rover, -->\n<!-- #              label = camera, -->\n<!-- #              subgroup = rover)) + -->\n<!-- #   geom_treemap() + -->\n<!-- #   geom_treemap_subgroup_border() + -->\n<!-- #   geom_treemap_text(fontface = \"italic\",  -->\n<!-- #                     colour = \"white\",  -->\n<!-- #                     place = \"centre\", -->\n<!-- #                     grow = F) + -->\n<!-- #  transition_time(sol) + -->\n<!-- #   ease_aes('linear') + -->\n<!-- #   labs(title = \"Sol: {frame_time}\")  -> p -->\n<!-- #  -->\n<!-- # anim_save(\"~/github/animated_treemap.gif\", p, ) -->\n<!-- ``` -->\n\n<!-- ```{r} -->\n<!-- cam_tbl <- tribble( -->\n<!--   ~camera, ~cam, -->\n<!-- \"FHAZ\",\t\"Front\\nHazard\", -->\n<!-- \"RHAZ\",\t\"Rear\\nHazard\", -->\n<!-- \"MAST\",\t\"Mast\", -->\n<!-- \"CHEMCAM\",\t\"Chemistry\", -->\n<!-- \"MAHLI\",\t\"Hand Lens\", -->\n<!-- \"MARDI\",\t\"Descent\", -->\n<!-- \"NAVCAM\",\t\"Navigation\", -->\n<!-- \"PANCAM\",\t\"Panoramic\", -->\n<!-- \"MINITES\",\t\"Thermal\", -->\n<!-- \"ENTRY\", \"Entry\") -->\n\n<!-- # install.packages(\"treemapify\") -->\n<!-- library(\"treemapify\") -->\n<!-- # library(\"ggthemr\") -->\n<!-- dat[,sum(photos),.(camera,rover)] %>%  -->\n<!--   left_join(cam_tbl) %>%  -->\n<!--   ggplot(aes(area = V1, -->\n<!--              fill = cam, -->\n<!--              label = cam, -->\n<!--              subgroup = rover)) + -->\n<!--   geom_treemap() + -->\n<!--   geom_treemap_subgroup_border(col = \"black\", -->\n<!--                                size = 1) + -->\n<!--   geom_treemap_text(fontface = \"italic\",  -->\n<!--                     colour = \"white\",  -->\n<!--                     place = \"centre\", -->\n<!--                     grow = F) -->\n\n<!--     ``` -->\n\n<!-- ```{r} -->\n<!-- # install.packages('hrbrthemes') -->\n<!-- library(\"hrbrthemes\") -->\n<!-- dat %>%  -->\n<!--   group_by(rover) %>%  -->\n<!--   count(camera) %>%  -->\n<!--   left_join(cam_tbl) %>%  -->\n<!--   group_by(rover) %>%  -->\n<!--   mutate(total_photos = sum(n), -->\n<!--          pc = n / total_photos) %>%  -->\n<!--   arrange(rover,n) %>%  -->\n<!--   mutate(ymax = cumsum(pc), -->\n<!--          ymin = c(0, head(ymax, -1)), -->\n<!--          labelPosition = (ymin + ymax)/2, -->\n<!--          label = glue::glue(\"{cam}: {scales::label_number_si()(n)}\")) %>%  -->\n<!--   ggplot(aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=cam)) + -->\n<!--      geom_rect() + -->\n<!--      coord_polar(theta=\"y\") + -->\n<!--   geom_text( x=4.5,  -->\n<!--              aes(y=labelPosition,  -->\n<!--                  label=label,  -->\n<!--                  color=cam), size=4) + # x here controls label position (inner / outer) -->\n<!--      xlim(c(2, 4)) + -->\n<!--   facet_wrap(~rover)  + -->\n<!--   theme_void() + -->\n<!--   theme(legend.position = \"none\") -->\n<!-- ``` -->\n\n\n<!-- ```{r} -->\n<!-- dat %>%  -->\n<!--   mutate(year = lubridate::year(date)) %>%  -->\n<!--   group_by(year, rover) %>%  -->\n<!--   count(camera) %>%  -->\n<!--   left_join(cam_tbl) %>%  -->\n<!--   mutate(total_photos = sum(n), -->\n<!--          pc = n / total_photos) %>%  -->\n<!--   arrange(rover,year, n) %>%  -->\n<!--   mutate(ymax = cumsum(pc), -->\n<!--          ymin = c(0, head(ymax, -1)), -->\n<!--          labelPosition = (ymin + ymax)/2, -->\n<!--          label = glue::glue(\"{cam}: {scales::label_number_si()(n)}\")) %>% -->\n<!--   filter(rover == \"spirit\") %>%  -->\n<!--   ggplot(aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=cam)) + -->\n<!--      geom_rect() + -->\n<!--      coord_polar(theta=\"y\") + -->\n<!--   geom_text( x=4.5,  -->\n<!--              aes(y=labelPosition,  -->\n<!--                  label=label,  -->\n<!--                  color=cam), size=4) + # x here controls label position (inner / outer) -->\n<!--      xlim(c(2, 4)) + -->\n<!--   facet_wrap(~year, ncol = 1)  + -->\n<!--   theme_void() + -->\n<!--   theme(legend.position = \"none\") -->\n<!-- ``` -->",
    "supporting": [
      "2021-04-13-30-day-chart-challenge_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}