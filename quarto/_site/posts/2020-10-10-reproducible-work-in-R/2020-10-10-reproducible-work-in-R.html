<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rahul">
<meta name="dcterms.date" content="2020-10-10">
<meta name="description" content="A few ways I ensure my work is reproducible in R">

<title>yHat - Reproducible Work in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-106573867-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>


<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="yHat - Reproducible Work in R">
<meta name="twitter:description" content="A few ways I ensure my work is reproducible in R">
<meta name="twitter:creator" content="@rsangole">
<meta name="twitter:card" content="summary">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">yHat</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">~/</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html">~/blog</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#source-of-pain" id="toc-source-of-pain" class="nav-link active" data-scroll-target="#source-of-pain">Source of Pain</a></li>
  <li><a href="#solution" id="toc-solution" class="nav-link" data-scroll-target="#solution">Solution</a>
  <ul class="collapse">
  <li><a href="#mran-time-machine" id="toc-mran-time-machine" class="nav-link" data-scroll-target="#mran-time-machine">1. MRAN Time Machine</a></li>
  <li><a href="#docker-image" id="toc-docker-image" class="nav-link" data-scroll-target="#docker-image">2. Docker Image</a>
  <ul class="collapse">
  <li><a href="#the-dockerfile" id="toc-the-dockerfile" class="nav-link" data-scroll-target="#the-dockerfile">The Dockerfile</a></li>
  </ul></li>
  <li><a href="#develop-in-docker" id="toc-develop-in-docker" class="nav-link" data-scroll-target="#develop-in-docker">3. Develop in Docker</a></li>
  <li><a href="#docker-images-accompany-r-projects" id="toc-docker-images-accompany-r-projects" class="nav-link" data-scroll-target="#docker-images-accompany-r-projects">4. Docker images accompany R projects</a></li>
  </ul></li>
  <li><a href="#thats-it" id="toc-thats-it" class="nav-link" data-scroll-target="#thats-it">That’s it!</a></li>
  <li><a href="#useful-links" id="toc-useful-links" class="nav-link" data-scroll-target="#useful-links">Useful Links</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Reproducible Work in R</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Docker</div>
    <div class="quarto-category">Programming Practices</div>
  </div>
  </div>

<div>
  <div class="description">
    A few ways I ensure my work is reproducible in R
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Rahul </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 10, 2020</p>
    </div>
  </div>
    
  </div>
  

</header>

<p><img src="elephant.jpeg" class="img-fluid"></p>
<section id="source-of-pain" class="level1">
<h1>Source of Pain</h1>
<ul>
<li>One of the biggest challenges we face as data-scientists while working on production-grade codebases is ensuring end-to-end reproduciblity and stability over time.
<ul>
<li>This would extend to the academia as well, but I’m not an academician.</li>
</ul></li>
<li>A basic R setup has no built-in functionality to store the package versions &amp; dependencies (unlike running within a conda environment, for example).</li>
<li>If your default repository is CRAN, it’s a major problem since CRAN gets updated on a daily basis.</li>
<li>I’ve found some solutions like <code>pkgdown</code> too cumbersome to use. I’ve even tried working within a conda environment setup for R, but I am not a fan.</li>
<li>Collaborating in a team between data-scientists adds an additional layer of complexity. In my experience:
<ul>
<li>Folks within one team can have different versions of everything - OS, the R kernel, packages, libraries, environment variables… !</li>
<li>Some folks are conservative in upgrading their systems; others are excited to try newer versions of packages</li>
</ul></li>
<li>Working across OS can often introduce unexpected problems (IME, particularly with functions which allow parallel compute <code>mcapply</code>, <code>future</code>.)
<ul>
<li>This becomes problematic when developing codebases on a local system (which might be Windows) but deploying codebases in another environment (which might be Linux)</li>
</ul></li>
</ul>
</section>
<section id="solution" class="level1">
<h1>Solution</h1>
<p>In my experience, the solution I’ve outlined below offers me an excellent approach for long term reproducibility and code stability:</p>
<ol type="1">
<li>Lock down your R package versions using MRAN snapshots</li>
<li>Lock down your working environment using a Docker image</li>
<li>Do all your development within Docker containers</li>
<li>Accompany all projects with a Docker image</li>
</ol>
<p>This has worked so well that I haven’t bothered using R/Rstudio on my local machine in well over half a year now.</p>
<section id="mran-time-machine" class="level2">
<h2 class="anchored" data-anchor-id="mran-time-machine">1. MRAN Time Machine</h2>
<p>Microsoft R Application Network (MRAN) offers a “<a href="https://mran.microsoft.com/timemachine">time machine</a>”. This service takes a daily snapshot of the <a href="http://cran.r-project.org">CRAN repository</a> repository - going as far back as Sep 2014. You can browse the snapshots on their page:</p>
<p><img src="rdocker-mran.png" class="img-fluid" width="450"></p>
<p>MRAN snapshots help us lock-down package versions using a date as the ‘index’. For example, running:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"lattice"</span>, </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">repos =</span> <span class="st">"https://mran.microsoft.com/snapshot/2020-10-01"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will install the version of <code>{lattice}</code> as of 1st Oct, 2020.</p>
<p>Now, this approach doesn’t make it easier to choose <em>specific versions</em> of packages <em>released over time</em>, but instead allows you to lock down a date and get only those versions available on the selected date. What that means is that running “Update Packages” on any date after 1st of Oct won’t change your package configuration.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">options</span>(<span class="at">repos =</span> <span class="st">"https://mran.microsoft.com/snapshot/2020-10-01"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">getOption</span>(<span class="st">"repos"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"https://mran.microsoft.com/snapshot/2020-10-01"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="docker-image" class="level2">
<h2 class="anchored" data-anchor-id="docker-image">2. Docker Image</h2>
<section id="the-dockerfile" class="level3">
<h3 class="anchored" data-anchor-id="the-dockerfile">The Dockerfile</h3>
<p>The <code>Dockerfile</code> holds the definition of how a docker image is built. The Dockerfile which I use to maintain this blog is saved <a href="https://github.com/rsangole/blog/blob/master/docker/Dockerfile">here</a>. It’s hosted on <a href="https://hub.docker.com/repository/docker/hatmatrix/blog">hub.docker.com</a> too.</p>
<p>Here’s a quick explanation of the file. For a deeper dive into Dockerfiles, there are lots of resources online <a href="https://rollout.io/blog/a-beginners-guide-to-the-dockerfile/">1</a>, <a href="https://linuxhint.com/understand_dockerfile/">2</a>, <a href="https://blog.hipolabs.com/understanding-docker-without-losing-your-shit-cf2b30307c63">3</a>.</p>
<section id="from" class="level4">
<h4 class="anchored" data-anchor-id="from">FROM</h4>
<p>I’m using the <code>rocker/tidyverse:4.0.0</code> <a href="https://hub.docker.com/layers/rocker/tidyverse/4.0.0/images/sha256-b5dca99adfd18ae14ba50dcbc4aaaec2674138bc75015104a77a9805694c157a?context=explore">image</a>, which offers a great starting point. It has R version 4.0.0 and the tidyverse packages preinstalled.</p>
<pre class="docker"><code>FROM rocker/tidyverse:4.0.0</code></pre>
</section>
<section id="run" class="level4">
<h4 class="anchored" data-anchor-id="run">RUN</h4>
<p>This installs many of the linux libraries needed for the subsequent R packages to work. I’ve also installed some useful utility packages like <code>curl</code>, <code>jq</code> and <code>vim</code>.</p>
<pre class="docker"><code>RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \
        libgit2-dev \
        libxml2-dev \
        ... \
        ... \
        curl \
        tree \
        jq \
        htop \
        texinfo \
        vim \
        man-db \
        less</code></pre>
</section>
<section id="env-r-pkg-install" class="level4">
<h4 class="anchored" data-anchor-id="env-r-pkg-install">ENV + R PKG INSTALL</h4>
<p>Here’s where I set the MRAN Build Date and then install the R packages I need using <code>install2.r</code> with the <code>-r</code> argument to point to MRAN Time Machine instead of CRAN.</p>
<pre class="docker"><code>ENV MRAN_BUILD_DATE=2020-09-01

# Install Basic Utility R Packages
RUN install2.r -r https://cran.microsoft.com/snapshot/${MRAN_BUILD_DATE} \
    --error \
    rgl \
    data.table \
    reprex \
    # ~ 30 more R Packages
    ... \
    ... \</code></pre>
</section>
<section id="build-push" class="level4">
<h4 class="anchored" data-anchor-id="build-push">Build &amp; Push</h4>
<p>Build the docker image and push it to <code>hub.docker.com</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build . <span class="at">-t</span> hatmatrix/blog:latest</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> push hatmatrix/blog:latest</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Your docker image is now avaiable online for anyone running your project to pull.</p>
</section>
</section>
</section>
<section id="develop-in-docker" class="level2">
<h2 class="anchored" data-anchor-id="develop-in-docker">3. Develop in Docker</h2>
<p>Now I have a stable docker image to use for this blog. I can run the image with this shell cmd:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-d</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-e</span> PASSWORD=1234 </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-v</span> ~/github/:/home/rstudio/projects/ </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-p</span> 3838:3838 </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-p</span> 8787:8787 </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="ex">hatmatrix/blog:latest</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The components of this command are:</p>
<ul>
<li><code>docker run</code> : Run a docker image…</li>
<li><code>-d</code> : in detached mode, i.e.&nbsp;once the image is run in the background, you get your shell prompt</li>
<li><code>-e PASSWORD=1234</code> : <code>-e</code> are additional arguments. Here, we’ve set the Rstudio password to 1234</li>
<li><code>-v</code> : this maps <code>~/github/</code> on my local machine to <code>~/home/rstudio/projects/</code> within the docker container</li>
<li><code>-p</code> : these args map ports from my local machine to ports within docker. We need one for rstudio (8787) and one for any shiny apps we launch from within rstudio (3838)</li>
<li><code>hatmatrix/blog:latest</code> : this is the name of the docker image</li>
</ul>
<p><strong>The importance of <code>-v</code>:</strong> Without <code>-v</code> you won’t have access to any of your local files within the docker container. Remember, docker containers are fully isolated from your local machine. Also, since containers are ephemeral (i.e.&nbsp;short-lived &amp; temporary), once the container is shutdown, you will lose any data stored within it permanently. Mapping to a local folder allows you to work on projects stored locally within the container.</p>
</section>
<section id="docker-images-accompany-r-projects" class="level2">
<h2 class="anchored" data-anchor-id="docker-images-accompany-r-projects">4. Docker images accompany R projects</h2>
<p>Just create a <code>/docker</code> folder in your working project directory, and save your Dockerfile. Here’s my example for this blog: <a href="https://github.com/rsangole/blog/tree/master/docker">example docker folder</a>. Optionally, create a <code>docker-build.sh</code> to save on some typing down the line.</p>
</section>
</section>
<section id="thats-it" class="level1">
<h1>That’s it!</h1>
<p>This is a lightweight workflow which has allowed me to maintain full reproducibility and code stability no matter which OS I’m working on.</p>
</section>
<section id="useful-links" class="level1">
<h1>Useful Links</h1>
<ul>
<li>https://mran.microsoft.com/timemachine</li>
<li>https://github.com/rocker-org/rocker</li>
</ul>


</section>

</main> <!-- /main -->
<div>
<hr>

<p> Subscribe to my newsletter! </p>

<iframe id="beehiiv-form" src="https://embeds.beehiiv.com/f1edc1d7-9d22-462b-935c-78e350a21f60?slim=true" data-test-id="beehiiv-embed" frameborder="0" scrolling="no" style="margin: 0; border-radius: 0px !important; background-color: transparent; height: 55px;"></iframe>

</div>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="rsangole/blog_comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">2022 rahul s</div>
  </div>
</footer>



</body></html>